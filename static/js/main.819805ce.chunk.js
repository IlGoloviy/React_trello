(this["webpackJsonpmy-trello"]=this["webpackJsonpmy-trello"]||[]).push([[0],{42:function(e,n,t){e.exports=t(69)},47:function(e,n,t){},69:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(11),i=t.n(o),c=(t(47),t(23)),s=t(12),d=t(13),p=t(16),u=t(14),l=t(10),f=t(17),b=t(2),m=t(15),h=t(3),v=t(4),O=t(8),g=t.n(O);function k(){var e=localStorage.getItem("token"),n={token:e};g.a.defaults.headers.common.Authorization="JWT "+e,g.a.post("https://trello.backend.tests.nekidaem.ru/api/v1/users/refresh_token/",n).then((function(e){return localStorage.setItem("token",e.data.token)}))}var x=localStorage.getItem("token");function E(){return{type:"GET_DATA",payload:g()({method:"get",url:"https://trello.backend.tests.nekidaem.ru/api/v1/cards/",auth:{username:"illia",password:"12qwasaszx"}}).then((function(e){var n=e.data;return{tasks:n,OnHold:n.filter((function(e){return"0"===e.row})),InProgress:n.filter((function(e){return"1"===e.row})),NeedsReview:n.filter((function(e){return"2"===e.row})),Approved:n.filter((function(e){return"3"===e.row}))}}))}}function j(e,n){return k(),{type:n,payload:g.a.post("https://trello.backend.tests.nekidaem.ru/api/v1/cards/",e).then((function(e){return e.data}))}}function D(e,n){return k(),{type:"MOVED_TASK_".concat(n.toUpperCase()),payload:e}}function y(e,n){return{type:"UPDATE_TASK",payload:g.a.patch("https://trello.backend.tests.nekidaem.ru/api/v1/cards/".concat(n,"/"),e).then((function(e){return e.data}))}}function w(){var e=Object(b.a)(["\n  color: #fff;\n"]);return w=function(){return e},e}function A(){var e=Object(b.a)(["\n  margin: 0;\n  color: #a2a5ad;\n  padding-bottom: 15px;\n"]);return A=function(){return e},e}function _(){var e=Object(b.a)(["\n  transform: rotate(45deg);\n  background: rgba(0,0,0,0);\n  border: none;\n  color: #a2a5ad;\n  text-align: right;\n  font-size: 24px;\n  padding: 0;\n  margin-left: 250px;\n  cursor: pointer;\n  :focus { outline: none; }\n  @media (max-width: 1300px) {\n    margin-left: 200px;\n  }\n  @media (max-width: 1100px) {\n    margin-left: 150px;\n  }\n  @media (max-width: 950px) {\n    margin-left: 250px;\n  }\n"]);return _=function(){return e},e}function I(){var e=Object(b.a)(["\n  background: #191a1d;\n  padding: 0 0 5px 10px;\n  margin-bottom: 10px;\n  cursor: move;\n"]);return I=function(){return e},e}g.a.defaults.headers.common.Authorization="JWT "+x;var T=h.a.div(I()),S=h.a.button(_()),L=h.a.p(A()),R=h.a.span(w());var P=Object(v.b)((function(e){return{state:e}}))((function(e){var n=e.task,t=function(){var t;e.dispatch((t=n.id,k(),{type:"DELETE_TASK",payload:g.a.delete("https://trello.backend.tests.nekidaem.ru/api/v1/cards/".concat(t,"/")).then((function(){return t}))}))};return r.a.createElement(m.b,{draggableId:"".concat(n.id),index:e.index},(function(e){return r.a.createElement(T,Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),r.a.createElement(S,{onClick:t},"+"),r.a.createElement(L,null,r.a.createElement(R,null,"id:")," ",n.id),r.a.createElement(L,null,n.text))}))}));function N(){var e=Object(b.a)(["\n  margin-left: 5px;\n  background: inherit;\n  border: none;\n  transform: rotate(45deg);\n  color: #a2a5ad;\n  font-size: 34px;\n  cursor: pointer;\n  :focus {\n    outline: none;\n  }\n"]);return N=function(){return e},e}function C(){var e=Object(b.a)(["\n  border: none;\n  background: #575a63;\n  color: #a2a5ad;\n  font-size: 16px;\n  padding: 5px 15px;\n  cursor: pointer;\n"]);return C=function(){return e},e}function K(){var e=Object(b.a)(["\n  width: 100%;\n  background: #575a63;\n  border: none;\n  box-sizing: border-box;\n  padding: 15px;\n  color: #a2a5ad;\n  font-size: 14px;\n  resize: none;\n  :focus {\n    outline: none;\n  }\n"]);return K=function(){return e},e}function H(){var e=Object(b.a)(["\n  display: flex;\n  align-items: center;\n  margin-top: 6px;\n"]);return H=function(){return e},e}function F(){var e=Object(b.a)(["\n  padding: 10px;\n"]);return F=function(){return e},e}function z(){var e=Object(b.a)(["\n  margin: 0;\n  color: #717580;\n  font-weight: 500;\n  font-size: 16px;\n  cursor: pointer;\n  padding: 10px;\n  :hover {\n    background: #191a1d;\n  }\n"]);return z=function(){return e},e}var V=h.a.h5(z()),U=h.a.div(F()),q=h.a.div(H()),M=h.a.textarea(K()),G=h.a.button(C()),W=h.a.button(N()),J=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(p.a)(this,Object(u.a)(n).call(this))).state={add:!1},t.text=Object(a.createRef)(),t.addTask=t.addTask.bind(Object(l.a)(t)),t.savedTask=t.savedTask.bind(Object(l.a)(t)),t}return Object(f.a)(n,e),Object(d.a)(n,[{key:"addTask",value:function(){this.setState({add:!this.state.add})}},{key:"savedTask",value:function(){var e={row:this.props.props,text:this.text.current.value};switch(this.props.props){case"0":this.props.dispatch(j(e,"ADD_TASK_ON-HOLD"));break;case"1":this.props.dispatch(j(e,"ADD_TASK_IN-PROGRESS"));break;case"2":this.props.dispatch(j(e,"ADD_TASK_NEEDS-REVIEW"));break;case"3":this.props.dispatch(j(e,"ADD_TASK_APPROVED"))}this.setState({add:!this.state.add})}},{key:"render",value:function(){return this.state.add?r.a.createElement(U,null,r.a.createElement(M,{ref:this.text,rows:"4",placeholder:"\u0412\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438"}),r.a.createElement(q,null,r.a.createElement(G,{onClick:this.savedTask},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"),r.a.createElement(W,{onClick:this.addTask},"+"))):r.a.createElement(V,{onClick:this.addTask},"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443")}}]),n}(r.a.Component);var B=Object(v.b)((function(e){return{state:e}}))(J);function Q(){var e=Object(b.a)(["\n  margin: 0;\n  padding: 10px;\n  text-transform: uppercase;\n  background: ",";\n  @media (max-width: 1100px) {\n    font-size: 18px;\n  }\n"]);return Q=function(){return e},e}function X(){var e=Object(b.a)(["\n  padding: 10px;\n  padding-bottom: 0;\n"]);return X=function(){return e},e}function Y(){var e=Object(b.a)(["\n  background: #292b31;\n  color: #fff;\n  width: 300px;\n  margin: 50px 15px;\n  @media (max-width: 1300px) {\n    width: 250px;\n  }\n  @media (max-width: 1100px) {\n    width: 200px;\n  }\n  @media (max-width: 950px) {\n    width: 300px;\n  }\n"]);return Y=function(){return e},e}var Z=h.a.div(Y()),$=h.a.div(X()),ee=h.a.h2(Q(),(function(e){return e.color})),ne=function(e){function n(){return Object(s.a)(this,n),Object(p.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(d.a)(n,[{key:"render",value:function(){var e,n=this.props.props,t=n.nameColumn,a=n.idColumn,o=n.background;return e=!!this.props[t].length&&this.props[t].map((function(e,n){return r.a.createElement(P,{task:e,key:e.id,index:n})})),r.a.createElement(Z,null,r.a.createElement(ee,{color:o},"on-hold (",this.props[t].length,")"),r.a.createElement(m.c,{droppableId:t},(function(n){return r.a.createElement($,Object.assign({ref:n.innerRef},n.droppableProps),e,n.placeholder)})),r.a.createElement(B,{props:a}))}}]),n}(r.a.Component);var te=Object(v.b)((function(e){return{OnHold:e.tasks.OnHold,InProgress:e.tasks.InProgress,NeedsReview:e.tasks.NeedsReview,Approved:e.tasks.Approved}}))(ne);function ae(){var e=Object(b.a)(["\n  background: #33363d;\n  width: 100%;\n  min-height: 100vh;\n  display: flex;\n  justify-content: space-evenly;\n  align-items: flex-start;\n  @media (max-width: 950px) {\n    padding: 0 15px;\n    box-sizing: border-box;\n    flex-wrap: wrap;\n  }\n"]);return ae=function(){return e},e}var re=h.a.div(ae()),oe=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(p.a)(this,Object(u.a)(n).call(this))).onDragEnd=t.onDragEnd.bind(Object(l.a)(t)),t}return Object(f.a)(n,e),Object(d.a)(n,[{key:"onDragEnd",value:function(e){var n=this,t=e.destination,a=e.source,r=e.draggableId;if(t&&(t.droppableId!==a.droppableId||t.index!==a.index)){if(a.droppableId===t.droppableId){var o=this.props.tasks[a.droppableId].slice(),i=o.filter((function(e){return e.id===Number(r)})),s=Object(c.a)(i,1)[0];return o.splice(a.index,1),o.splice(t.index,0,s),o.forEach((function(e,n){return e.seq_num=n})),this.props.dispatch(D(o,a.droppableId)),void o.forEach((function(e){var t={row:e.row,seq_num:e.seq_num,text:e.text};n.props.dispatch(y(t,e.id))}))}var d=this.props.tasks[a.droppableId].slice(),p=this.props.tasks[t.droppableId].slice(),u=d.filter((function(e){return e.id===Number(r)})),l=Object(c.a)(u,1)[0];d.splice(a.index,1),p.splice(t.index,0,l),p.forEach((function(e,n){e.seq_num=n;for(var a=["OnHold","InProgress","NeedsReview","Approved"],r=0;r<a.length;r++)a[r]===t.droppableId&&(e.row=r)})),this.props.dispatch(D(d,a.droppableId)),this.props.dispatch(D(p,t.droppableId)),p.forEach((function(e){var t={row:e.row,seq_num:e.seq_num,text:e.text};n.props.dispatch(y(t,e.id))}))}}},{key:"render",value:function(){return r.a.createElement(m.a,{onDragEnd:this.onDragEnd},r.a.createElement(re,null,r.a.createElement(te,{props:{nameColumn:"OnHold",idColumn:"0",background:"#fb7e46"}}),r.a.createElement(te,{props:{nameColumn:"InProgress",idColumn:"1",background:"#2a92bf"}}),r.a.createElement(te,{props:{nameColumn:"NeedsReview",idColumn:"2",background:"#f4ce46"}}),r.a.createElement(te,{props:{nameColumn:"Approved",idColumn:"3",background:"#00b961"}})))}},{key:"componentDidMount",value:function(){localStorage.getItem("token")||(g.a.defaults.headers.post["Content-Type"]="application/json",g.a.post("https://trello.backend.tests.nekidaem.ru/api/v1/users/login/",{username:"illia",password:"12qwasaszx"}).then((function(e){var n=e.data.token;localStorage.setItem("token",n)}))),this.props.dispatch(E())}}]),n}(r.a.Component);var ie=Object(v.b)((function(e){return{tasks:e.tasks}}))(oe),ce=t(6),se=t(38),de=t(39),pe=t(40),ue=t(9),le=t(7);var fe=Object(ce.c)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tasks:[],OnHold:[],InProgress:[],NeedsReview:[],Approved:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"GET_DATA_FULFILLED":return Object(le.a)({},n.payload);case"ADD_TASK_ON-HOLD_FULFILLED":return Object(le.a)({},e,{tasks:[].concat(Object(ue.a)(e.tasks),[n.payload]),OnHold:[].concat(Object(ue.a)(e.OnHold),[n.payload])});case"ADD_TASK_IN-PROGRESS_FULFILLED":return Object(le.a)({},e,{tasks:[].concat(Object(ue.a)(e.tasks),[n.payload]),InProgress:[].concat(Object(ue.a)(e.InProgress),[n.payload])});case"ADD_TASK_NEEDS-REVIEW_FULFILLED":return Object(le.a)({},e,{tasks:[].concat(Object(ue.a)(e.tasks),[n.payload]),NeedsReview:[].concat(Object(ue.a)(e.NeedsReview),[n.payload])});case"ADD_TASK_APPROVED_FULFILLED":return Object(le.a)({},e,{tasks:[].concat(Object(ue.a)(e.tasks),[n.payload]),Approved:[].concat(Object(ue.a)(e.Approved),[n.payload])});case"DELETE_TASK_FULFILLED":return Object(le.a)({},e,{tasks:e.tasks.filter((function(e){return e.id!==n.payload})),OnHold:e.OnHold.filter((function(e){return e.id!==n.payload})),InProgress:e.InProgress.filter((function(e){return e.id!==n.payload})),NeedsReview:e.NeedsReview.filter((function(e){return e.id!==n.payload})),Approved:e.Approved.filter((function(e){return e.id!==n.payload}))});case"MOVED_TASK_ONHOLD":return Object(le.a)({},e,{OnHold:n.payload});case"MOVED_TASK_INPROGRESS":return Object(le.a)({},e,{InProgress:n.payload});case"MOVED_TASK_NEEDSREVIEW":return Object(le.a)({},e,{NeedsReview:n.payload});case"MOVED_TASK_APPROVED":return Object(le.a)({},e,{Approved:n.payload});case"UPDATE_TASK_FULFILLED":return e.tasks=e.tasks.filter((function(e){return e.id!==n.payload.id})),Object(le.a)({},e,{tasks:[].concat(Object(ue.a)(e.tasks),[n.payload])});default:return e}}}),be=Object(ce.a)(pe.a,de.a,Object(se.createLogger)()),me=Object(ce.e)(fe,be);i.a.render(r.a.createElement(v.a,{store:me},r.a.createElement(ie,null)),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.819805ce.chunk.js.map